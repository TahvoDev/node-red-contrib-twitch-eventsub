<script type="text/javascript">
    RED.nodes.registerType('twitch-eventsub-channel-stream-online', {
      category: 'Twitch Eventsub',
      color: '#b9a3e3',
      defaults: {
        name: { value: "" },
        config: { value: "", type: "twitch-eventsub-config", required: true }
      },
      inputs: 0,
      outputs: 1,
      icon: 'twitch-icon.png',
      paletteLabel: "Stream Online",
      label: function() {
        if (this.name) {
          return this.name;
        }
        else {
          var config = RED.nodes.node(this.config);
          return 'Stream Online' + (config ? ' (' + (config.name || '') + ')' : '');
        }
      },
    });
  </script>
  
  <script type="text/html" data-template-name="twitch-eventsub-channel-stream-online">
    <div class="form-row">
      <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
      <input type="text" id="node-input-name" placeholder="Name">
    </div>

    <div class="form-row">
      <label for="node-input-config"><i class="fa fa-cog"></i> Config</label>
      <input type="text" id="node-input-config" placeholder="">
    </div>
  </script>
  
  <script type="text/html" data-help-name="twitch-eventsub-channel-stream-online">
      <h2>Twitch Stream Online</h2>
      <p>Triggers when a stream goes live in your Twitch channel.</p>
  
      <h3>Configuration</h3>
      <ul>
          <li><strong>Name</strong>: Optional name for the node</li>
          <li><strong>Config</strong>: Select your Twitch Eventsub configuration</li>
      </ul>
      
      <h3>Output</h3>
      <p>Emits a message when the stream goes online with the following properties:</p>
      
      <dl class="message-properties">
          <dt>payload <span class="property-type">object</span></dt>
          <dd>
              <ul>
                  <li>
                      <dt>userId <i>string</i></dt>
                      <dd>Twitch user ID of the broadcaster</dd>
                  </li>
                  <li>
                      <dt>userName <i>string</i></dt>
                      <dd>Twitch login name of the broadcaster</dd>
                  </li>
                  <li>
                      <dt>userDisplayName <i>string</i></dt>
                      <dd>Display name of the broadcaster</dd>
                  </li>
                  <li>
                      <dt>broadcasterId <i>string</i></dt>
                      <dd>Twitch user ID of the channel that went live</dd>
                  </li>
                  <li>
                      <dt>broadcasterName <i>string</i></dt>
                      <dd>Twitch login name of the broadcaster</dd>
                  </li>
                  <li>
                      <dt>broadcasterDisplayName <i>string</i></dt>
                      <dd>Display name of the broadcaster</dd>
                  </li>
                  <li>
                      <dt>startDate <i>Date</i></dt>
                      <dd>When the stream went online</dd>
                  </li>
                  <li>
                      <dt>type <i>string</i></dt>
                      <dd>Type of stream (e.g., "live", "playlist", "watch_party", etc.)</dd>
                  </li>
                  <li>
                      <dt>rawEvent <i>object</i></dt>
                      <dd>Complete event data from Twitch API</dd>
                  </li>
              </ul>
          </dd>
      </dl>
      
      <h3>Example Usage</h3>
      <p>To be notified when your stream goes live, connect this node to a function node that sends a notification.</p>
  </script>